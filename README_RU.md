## Синхрофазотрон golang 0.0.1

### Проблематика.

При разработке кода множественным командами в одной предметной области происходит нелинейное развитие в различных его
частях.  
Данная расфазировка между различными частями кода приводит к проблемам совместимости что является основной болью
технической поддержки, баг-инжиниринга и команды DevOps.

### Введение.

В основном системы хранения и версионирования кода работают основывая под капотом на git.  
Данный туллинг под капотом также использует git и предоставляет автоматизацию создания и развития монорепозитория.

### Компоненты.

2. Инициализация.
2. Синхронизация

### Места хранения.

1. Конфигурационные файлы ./scripts/config
2. Хуки ./scripts/hooks
3. Туллинг ./scripts/tools

### Инициализация.

#### Конфигурация предоставлена в ./scripts/config/init.sh.json

```json
{
  "git": {
    "remote": "git@github.com:mvp-simple/auto-merge-result.git"
  },
  "repositories": {
    "dauni-ml": "https://github.com/rinatusmanov/dauni-ml.git",
    "gg/dauni-ml": "https://github.com/rinatusmanov/dauni-ml.git",
    "jsonrpc20": "https://github.com/rinatusmanov/evgeniya.git"
  }
}
```

| Ключ         | Пояснение                                                                       |
|--------------|---------------------------------------------------------------------------------|
| git.remote   | репозиторий куда будет складываться результат                                   |
| repositories | репозитории источники, при этом в ключах можно указать какую угодно вложенность |

#### Жизненный цикл инициализации.

| # | Тип    |                 | Пояснение                      |
|---|--------|-----------------|--------------------------------|
| 1 | хук    | download_before |                                |
| 2 | логика |                 | загрузка исходных репозиториев |
| 3 | хук    | download_after  |                                |

Хуки ищутся в папке /scripts/hooks/init.sh/

#### Команда запуска.

```bash
./scripts/init.sh
```

### Синхронизация.

#### Конфигурация предоставлена в ./scripts/config/sync.sh.json

```json
{
  "repositories": [
    "dauni-ml",
    "gg/dauni-ml",
    "jsonrpc20"
  ]
}
```

| Ключ         | Пояснение                                                                                                               |
|--------------|-------------------------------------------------------------------------------------------------------------------------|
| repositories | репозитории источники, с которых будут загружаться обновления, при этом в ключах можно указать какую угодно вложенность |

#### Жизненный цикл инициализации.

| # | Тип    |                       | Пояснение                                                           |
|---|--------|-----------------------|---------------------------------------------------------------------|
| 1 | хук    | _clean_pull_before    | запускается до очистки всех изменений в наблюдаемых репозиториях    |
| 2 | логика |                       | очистка всех изменений в наблюдаемых репозиториях                   |
| 3 | хук    | _clean_pull_after     | запускается после очистки всех изменений в наблюдаемых репозиториях |
| 4 | хук    | _vendor_folder_before | запускается до запуска вложенного компонента make-vendor-folder     |
| 5 | логика |                       | запуск вложенного компонента make-vendor-folder                     |
| 6 | хук    | _vendor_folder_after  | запускается после запуска вложенного компонента make-vendor-folder  |
| 7 | хук    | _rush_result_before   | запускается до отправки готового результата                         |
| 8 | логика |                       | отправки готового результата                                        |
| 9 | хук    | _rush_result_after    | запускается после отправки готового результата                      |

Хуки ищутся в папке /scripts/hooks/sync.sh/

#### Команда запуска.

```bash
./scripts/init.sh
```